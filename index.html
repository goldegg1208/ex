<!DOCTYPE html>
<html>
<head>
  <style>
    table, th, td {
      border: 1px solid black;
    }
    input[type=text] {
      width: 30%;
      padding: 12px 20px;
      margin: 8px 0;
      box-sizing: border-box;
      border: 1px solid #555;
      outline: none;
    }
    input[type=text]:focus {
      background-color: lightblue;
    }
  </style>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>exchange rate</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
</head>

<body>
<table>
  <thead>
    <tr>
      <th>환율 계산기</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <div class="page">
          <div>
            <h1 class="title">Currency Exchange</h1>
            <div class="exchange-box">
              <div class="dropdown">
                <button class="dropbtn" id="from-button">USD</button>
              </div>
              <div class="input-area">
                <input type="text" id="from-input" onkeyup="convert()" placeholder="금액 또는 '금액*수량' 을 입력하세요">
                <div id="fromNumToKorea" class="Number">달러</div>
              </div>
            </div>
            <h1 class="simbol">=</h1>
            <div class="exchange-box">
              <div class="dropdown">
                <button class="dropbtn" id="to-button">KRW</button>
              </div>
              <div class="input-area">
                <input type="number" id="to-input" onkeyup="reconvert()">
                <div id="toNumToKorea" class="Number">원</div>
              </div>
            </div>
          </div>
        </div>
      </td>

      <td style="vertical-align: top; padding-left: 20px; padding-right: 20px;">
        <div>
          <p><b>기존 보유단가</b>
          <input id="stock_price" class="inputtext" style="width: 150px; vertical-align: middle; text-align: right;" type="text"> <b> (원/달러)</b></p>
          <p><b>기존 보유수량</b>
          <input id="stocks" class="inputtext" style="width: 150px; vertical-align: middle; text-align: right;" type="text"><b> 주</b></p>
          <p><b>신규 매수단가</b>
          <input id="addprice" class="inputtext" style="width: 150px; vertical-align: middle; text-align: right;" type="text"><b> (원/달러)</b></p>
          <p><b>신규 매수수량</b>
          <input id="addstocks" class="inputtext" style="width: 150px; vertical-align: middle; text-align: right;" type="text"><b> 주</b></p>
          <p><b>&nbsp;</b></p>
          <p>&nbsp;</p>
          <p><button size="10px" style="color: #fff; background:black; font-size:1em; border-radius:0.5em; padding:5px 20px;" onclick="calstocks()">계산하기</button></p>
          <p>&nbsp;</p>
          <p><b> 총 보유수량 : <span id="cal_stocks"></span><span>주</span><br>평단가 : <span id="cal_result"></span><span>원</span></b></p>

          <script type="text/javascript">
            function calstocks() {
              var stock_price = document.getElementById('stock_price').value;
              stock_price = parseFloat(stock_price);

              var stocks = document.getElementById('stocks').value;
              stocks = parseInt(stocks);

              var addprice = document.getElementById('addprice').value;
              addprice = parseFloat(addprice);

              var addstocks = document.getElementById('addstocks').value;
              addstocks = parseInt(addstocks);

              var cal_stocks;
              cal_stocks = parseInt(cal_stocks);
              cal_stocks = eval(stocks + addstocks);

              var cal_result;
              cal_result = parseFloat(cal_result);
              cal_result = eval(((stock_price * stocks) + (addprice * addstocks)) / cal_stocks);
              cal_result = cal_result.toFixed(2);

              document.getElementById("cal_stocks").innerHTML = cal_stocks;
              document.getElementById("cal_result").innerHTML = cal_result;
            }
          </script>
        </div>
      </td>       
    </tr>  
  </tbody>
</table>

<!-- main.js 스크립트는 여기서 로드 -->
<script src="main.js"></script>
</body>
</html>
